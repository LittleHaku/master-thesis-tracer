\PassOptionsToPackage{table,svgnames,dvipsnames}{xcolor}

\usepackage{fontspec}           % Main package for using system fonts with Lua/XeTeX
\usepackage[english]{babel}      % Language support for hyphenation rules, etc.
\usepackage{csquotes}             % Context-sensitive quotation marks


\setmainfont{TeX Gyre Pagella}
\setsansfont{TeX Gyre Heros}
\setmonofont{TeX Gyre Cursor}

\usepackage{unicode-math}
\setmathfont{TeX Gyre Pagella Math}

\usepackage[%
  backend=biber,
  style=ieee,
  citestyle=numeric-comp,
  bibstyle=ieee,
  sorting=none,
  maxnames=3,
  minnames=1,
  maxbibnames=99,
  giveninits=true,
  uniquename=init]{biblatex} % IEEE style for citations
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{scrhack} % necessary for listings package
\usepackage{listings}
\usepackage{lstautogobble}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{booktabs}
\usepackage[final]{microtype}
\usepackage{caption}
\usepackage[printonlyused]{acronym}
\usepackage{ifthen}
\usepackage{hyperref} % Added for autoref support
\usepackage{tcolorbox}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{ragged2e}
\usepackage{tikz}
\usepackage{float}
\usepackage{subcaption}
\usepackage{caption}

\usetikzlibrary{shapes.geometric, arrows.meta, positioning, fit, backgrounds, calc}


%\hypersetup{hidelinks} % removes colored boxes around references and links

% for fachschaft_print.pdf
\makeatletter
\if@twoside
	\typeout{TUM-Dev LaTeX-Thesis-Template: twoside}
\else
	\typeout{TUM-Dev LaTeX-Thesis-Template: oneside}
\fi
\makeatother

\addto\extrasenglish{
	\def\lstnumberautorefname{Line}
	\def\chapterautorefname{Chapter}
	\def\sectionautorefname{Section}
	\def\subsectionautorefname{Subsection}
	\def\subsubsectionautorefname{Subsubsection}
}

% Themes
\ifthenelse{\equal{\detokenize{dark}}{\jobname}}{%
  % Dark theme
  \newcommand{\bg}{black} % background
  \newcommand{\fg}{white} % foreground
  \usepackage[pagecolor=\bg]{pagecolor}
  \color{\fg}
}{%
  % Light theme
  \newcommand{\bg}{white} % background
  \newcommand{\fg}{black} % foreground
}

%\bibliography{bibliography}
\addbibresource{bibliography.bib}

\setkomafont{disposition}{\normalfont\bfseries} % use serif font for headings
\linespread{1.05} % adjust line spread for mathpazo font

% Add table of contents to PDF bookmarks
%\BeforeTOCHead[toc]{{\cleardoublepage\pdfbookmark[0]{\contentsname}{toc}}}

% Define TUM corporate design colors
% Taken from http://portal.mytum.de/corporatedesign/index_print/vorlagen/index_farben
\definecolor{TUMBlue}{HTML}{0065BD}
\definecolor{TUMSecondaryBlue}{HTML}{005293}
\definecolor{TUMSecondaryBlue2}{HTML}{003359}
\definecolor{TUMBlack}{HTML}{000000}
\definecolor{TUMWhite}{HTML}{FFFFFF}
\definecolor{TUMDarkGray}{HTML}{333333}
\definecolor{TUMGray}{HTML}{808080}
\definecolor{TUMLightGray}{HTML}{CCCCC6}
\definecolor{TUMAccentGray}{HTML}{DAD7CB}
\definecolor{TUMAccentOrange}{HTML}{E37222}
\definecolor{TUMAccentGreen}{HTML}{A2AD00}
\definecolor{TUMAccentLightBlue}{HTML}{98C6EA}
\definecolor{TUMAccentBlue}{HTML}{64A0C8}
\definecolor{EPS}{HTML}{996114}
\definecolor{UAMGreen}{HTML}{4a7729}
\definecolor{UAMBlue}{HTML}{0077c8}

% Settings for pgfplots
\pgfplotsset{compat=newest}
\pgfplotsset{
  % For available color names, see http://www.latextemplates.com/svgnames-colors
  cycle list={TUMBlue\\TUMAccentOrange\\TUMAccentGreen\\TUMSecondaryBlue2\\TUMDarkGray\\},
}

% Settings for lstlistings
\lstset{%
  basicstyle=\small\ttfamily,
  columns=fullflexible,
  autogobble,
  keywordstyle=\bfseries\color{UAMBlue},
  stringstyle=\color{UAMGreen},
  commentstyle=\color{EPS},
  captionpos=b,
  frame=single,
  framerule=0.4pt,
  rulecolor=\color{UAMBlue},
  backgroundcolor=\color{TUMLightGray!10},
  breaklines=true,
  breakatwhitespace=true,
  showstringspaces=false,
  numbers=left,
  numberstyle=\tiny\color{TUMGray},
  stepnumber=1,
  numbersep=5pt
}

% YAML language definition
\lstdefinelanguage{yaml}{
  basicstyle=\fontsize{8}{9}\selectfont\ttfamily\color{TUMDarkGray},
  numberstyle=\fontsize{7}{8}\selectfont\ttfamily\color{TUMGray},
  comment=[l]{\#},
  commentstyle=\color{TUMGray}\itshape,
  string=[s]{"}{"},
  stringstyle=\color{UAMGreen},
  showstringspaces=false,
  breaklines=true,
  breakatwhitespace=true,
  morekeywords=[1]{false,null,no,off,on,true,yes},
  keywordstyle=[1]\color{EPS}\bfseries,
  morekeywords=[2]{all_answered,chatbot,context,conversation,data,description,fallback,format,function,goals,goal_style,interaction_style,is_starter,language,limit,llm,max_cost,max,min,model,number,output,personality,role,step,steps,temperature,test_name,type,user},
  keywordstyle=[2]\color{UAMBlue}\bfseries,
  morekeywords=[3]{0,1,1.5,10,18,2,3,30,4,5,6,7,8,9},
  keywordstyle=[3]\color{UAMBlue}\bfseries,
  morekeywords=[4]{cheese_toppings,chosen_toppings,customization_instructions,drink_order_confirmation_number,drink_order_summary,drink_option_name,drink_option_price,drink_quantity,drink_quantity_requested,drink_type,drink_type_selected,drinks_menu,final_order_summary,meat_toppings,number_of_drinks,number_of_drinks_confirmation,order_completion_status,pizza_size,pizza_type,pizza_type_list,pizza_types,sauce_options,size_prompt_status,total_cost,vegetable_toppings},
  keywordstyle=[4]\color{TUMSecondaryBlue2}\bfseries,
  morekeywords=[5]{forward,random},
  keywordstyle=[5]\color{UAMGreen}\bfseries,
  rulecolor=\color{UAMBlue},
  sensitive=false
}

\lstdefinelanguage{connector-examples}{
  comment=[l]{\#},
  commentstyle=\color{TUMGray}\itshape,
  string=[s]{"}{"},
  stringstyle=\color{UAMGreen},
  showstringspaces=false,
  breaklines=true,
  breakatwhitespace=true,
}

\lstdefinelanguage{tracer-examples}{
  sensitive=false,
  morekeywords={
    tracer
  },
  keywordstyle=\color{UAMBlue}\bfseries,
  morestring=[b]",
  morestring=[b]',
  stringstyle=\color{UAMGreen},
  morecomment=[l]{\#},
  commentstyle=\color{EPS}\itshape,
  literate=
    {\$}{{\textcolor{EPS}{\textbf{\$}\ }}}1
    {--list-connectors}{{\textcolor{UAMGreen}{\textbf{--list-connectors}\ }}}{16}
    {--list-connector-params}{{\textcolor{UAMGreen}{\textbf{--list-connector-params}\ }}}{21}
    {--technology}{{\textcolor{UAMGreen}{\textbf{--technology}\ }}}{12}
    {--connector-params}{{\textcolor{UAMGreen}{\textbf{--connector-params}\ }}}{17}
    {--output}{{\textcolor{UAMGreen}{\textbf{--output}\ }}}{9}
    {--sessions}{{\textcolor{UAMGreen}{\textbf{--sessions}\ }}}{10}
    {--turns}{{\textcolor{UAMGreen}{\textbf{--turns}\ }}}{7}
    {--model}{{\textcolor{UAMGreen}{\textbf{--model}\ }}}{7}
    {--profile-model}{{\textcolor{UAMGreen}{\textbf{--profile-model}\ }}}{14}
    {-v}{{\textcolor{UAMGreen}{\textbf{-v}\ }}}{3}
    {millionbot}{{\textcolor{UAMBlue}{\textbf{millionbot }}}}{11}
    {custom}{{\textcolor{UAMBlue}{\textbf{custom }}}}{7}
    {taskyto}{{\textcolor{UAMBlue}{\textbf{taskyto }}}}{8}
    {rasa}{{\textcolor{UAMBlue}{\textbf{rasa }}}}{5}
}

\lstdefinelanguage{bash}{
  sensitive=true,
  keywordstyle=\color{UAMBlue}\bfseries,
  morecomment=[l]{\#},
  commentstyle=\color{EPS}\itshape,
}

\lstdefinelanguage{conversations}{
  basicstyle=\small\ttfamily,
  sensitive=true,
  alsoletter={:}, % Treat ':' as part of a keyword
  keepspaces=true,
  morecomment=[l][\color{TUMSecondaryBlue2}\bfseries]{===},
  morecomment=[l][\color{TUMSecondaryBlue2}\bfseries]{---},
  morecomment=[l][\color{TUMGray}\itshape]{Analyzing},
  morecomment=[l][\color{TUMGray}\itshape]{Extracting},
  morecomment=[l][\color{TUMGray}\itshape]{Session},
  morecomment=[l][\color{TUMAccentGreen}]{â€¢},
  % Keywords for inline highlighting only
  morekeywords=[1]{MERGED, EXPLORATION, COMPLETE, CONSIDERED_MERGE, ADDED_NEW},
  keywordstyle=[1]{\bfseries\color{TUMSecondaryBlue2}},
  morekeywords=[2]{Explorer:},
  keywordstyle=[2]{\color{UAMBlue}\bfseries},
  morekeywords=[3]{Chatbot:},
  keywordstyle=[3]{\color{UAMGreen}\bfseries},
  % Basic settings
  showstringspaces=false,
  breaklines=true,
  breakatwhitespace=true,
}


\lstdefinestyle{prompt}{
  columns=fullflexible,
  autogobble,
  breaklines=true,
  breakatwhitespace=true,
  showstringspaces=false,
  numbers=none
}
